{"ast":null,"code":"import { getDateYYYYMMDD } from \"./app.util\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./app.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"./add/add.component\";\nimport * as i4 from \"./list/list.component\";\nfunction AppComponent_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 5);\n    i0.ɵɵlistener(\"click\", function AppComponent_button_5_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.onCancel());\n    });\n    i0.ɵɵtext(1, \" Cancel \");\n    i0.ɵɵelementEnd();\n  }\n}\nlet AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(appService) {\n      this.appService = appService;\n      this.todos = [];\n      this.formState = \"add\";\n      this.form = {\n        id: null,\n        name: \"\",\n        description: \"\",\n        dueDate: getDateYYYYMMDD(new Date()),\n        priority: \"normal\",\n        isDone: false\n      };\n      this.todos = this.appService.getTasks();\n    }\n    onDetail(task) {\n      this.formState = \"edit\";\n      this.form = {\n        ...task\n      };\n    }\n    onRemove(index) {\n      this.todos.splice(index, 1);\n      this.appService.setTasks(this.todos);\n    }\n    onChangeDone(data) {\n      data.isDone = !data.isDone;\n      this.appService.setTasks(this.todos);\n    }\n    onSubmit(data) {\n      if (data.id) {\n        for (let i = 0; i < this.todos.length; i++) {\n          if (this.todos[i].id === data.id) {\n            this.todos[i].name = data.name;\n            this.todos[i].description = data.description;\n            this.todos[i].priority = data.priority;\n            this.todos[i].dueDate = data.dueDate;\n            break;\n          }\n        }\n        this.appService.setTasks(this.todos);\n        this.onCancel();\n        return;\n      }\n      this.todos.push({\n        ...data,\n        id: this.todos.length + 1\n      });\n      this.appService.setTasks(this.todos);\n      this.onCancel();\n    }\n    onCancel() {\n      this.formState = \"add\";\n      this.form = {\n        id: null,\n        name: \"\",\n        description: \"\",\n        dueDate: getDateYYYYMMDD(new Date()),\n        priority: \"normal\",\n        isDone: false\n      };\n    }\n  }\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.AppService));\n  };\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    decls: 6,\n    vars: 5,\n    consts: [[1, \"app-container\"], [3, \"data\", \"detail\", \"remove\", \"changeDone\"], [1, \"title\"], [3, \"formState\", \"formData\", \"submit\"], [\"class\", \"cancel-btn\", 3, \"click\", 4, \"ngIf\"], [1, \"cancel-btn\", 3, \"click\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"app-list\", 1);\n        i0.ɵɵlistener(\"detail\", function AppComponent_Template_app_list_detail_1_listener($event) {\n          return ctx.onDetail($event);\n        })(\"remove\", function AppComponent_Template_app_list_remove_1_listener($event) {\n          return ctx.onRemove($event);\n        })(\"changeDone\", function AppComponent_Template_app_list_changeDone_1_listener($event) {\n          return ctx.onChangeDone($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵtext(3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"app-add\", 3);\n        i0.ɵɵlistener(\"submit\", function AppComponent_Template_app_add_submit_4_listener($event) {\n          return ctx.onSubmit($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(5, AppComponent_button_5_Template, 2, 0, \"button\", 4);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"data\", ctx.todos);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.formState === \"add\" ? \"New Task\" : \"Edit Task\", \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formState\", ctx.formState)(\"formData\", ctx.form);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.formState === \"edit\");\n      }\n    },\n    dependencies: [i2.NgIf, i3.AddComponent, i4.ListComponent],\n    styles: [\".app-container[_ngcontent-%COMP%]{width:1000px;max-width:100%;margin:auto}.app-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700;font-size:20px;text-align:center;margin-top:20px}.app-container[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background:#cccccc}\"]\n  });\n  return AppComponent;\n})();\nexport { AppComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}